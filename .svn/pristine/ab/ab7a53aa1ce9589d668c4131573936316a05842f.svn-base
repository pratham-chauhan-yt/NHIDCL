

<?php $__env->startSection('dashboard_content'); ?>
    <div class="row">
        <div class="col-md-12">
            <div class="parrent_dahboard_">
                <div class="text"><?php echo e(__('Edit User Details')); ?></div>
            </div>
        </div>
    </div>
    <div class="col-md-12">
        <div class="bg_chart_card">
            <?php if(count($errors) > 0): ?>
                <div class="alert alert-danger">
                    <strong>Whoops!</strong> There were some problems with your input.<br><br>
                    <ul>
                        <?php $__currentLoopData = $errors->all(); $__env->addLoop($__currentLoopData); foreach($__currentLoopData as $error): $__env->incrementLoopIndices(); $loop = $__env->getLastLoop(); ?>
                            <li><?php echo e($error); ?></li>
                        <?php endforeach; $__env->popLoop(); $loop = $__env->getLastLoop(); ?>
                    </ul>
                </div>
            <?php endif; ?>

            <?php echo Form::open([
                'route' => ['user-config.update', Crypt::encrypt($user->id)],
                'method' => 'PATCH',
            ]); ?>

            <div class="row">
                <div class="col-12 col-sm-12 col-md-4 col-lg-4">
                    <div class="mb-3">
                        <label class="form-label aster"><?php echo e(__('Employee Id')); ?></label>
                        <input type="text" class="form-control" name="user_id" id="user_id"
                            value="<?php echo e(old('user_id', $user->user_id)); ?>" maxlength="100" required>
                    </div>
                </div>
                <div class="col-12 col-sm-12 col-md-4 col-lg-4">
                    <div class="mb-3">
                        <label class="form-label aster"><?php echo e(__('Employee Name')); ?></label>
                        <input type="text" class="form-control" id="name" name="name"
                            value="<?php echo e(old('name', $user->name)); ?>" maxlength="100" required>
                    </div>
                </div>
                <div class="col-12 col-sm-12 col-md-4 col-lg-4">
                    <div class="mb-3">
                        <label class="form-label aster"><?php echo e(__('Email')); ?></label>
                        <input type="email" class="form-control" name="email" id="email"
                            value="<?php echo e(old('email', $user->email)); ?>" maxlength="100" required>
                    </div>
                </div>
                <div class="col-12 col-sm-12 col-md-4 col-lg-4">
                    <div class="mb-3">
                        <label for="" class="form-label aster"><?php echo e(__('Status')); ?></label>
                        <select name="userid_status" class="form-select" id="userid_status" required>
                            <option value=""><?php echo e(__('Choose...')); ?></option>
                            <option <?php echo e(old('userid_status', $user->userid_status) == '1' ? 'selected' : ''); ?>

                                value="1">Active</option>
                            <option <?php echo e(old('userid_status', $user->userid_status) == '2' ? 'selected' : ''); ?>

                                value="2">Inactive
                            </option>
                            <option <?php echo e(old('userid_status', $user->userid_status) == '3' ? 'selected' : ''); ?>

                                value="3">Blacklisted
                            </option>
                            <option <?php echo e(old('userid_status', $user->userid_status) == '4' ? 'selected' : ''); ?>

                                value="4">Left NHIDCL
                            </option>
                        </select>
                    </div>
                </div>
                <div class="col-12 col-sm-12 col-md-4 col-lg-4">
                    <div class="mb-3">
                        <label for="" class="form-label aster"><?php echo e(__('Is NHIDCL Employee')); ?></label>
                        <select name="is_nhidcl_employee" class="form-select" id="is_nhidcl_employee" required>
                            <option value=""><?php echo e(__('Choose...')); ?></option>
                            <option <?php echo e(old('is_nhidcl_employee', $user->is_nhidcl_employee) == '1' ? 'selected' : ''); ?>

                                value="1">Yes</option>
                            <option <?php echo e(old('is_nhidcl_employee', $user->is_nhidcl_employee) == '0' ? 'selected' : ''); ?>

                                value="0">No
                            </option>
                        </select>
                    </div>
                </div>

                <?php if($user->is_nhidcl_employee == '1'): ?>
                    <div class="parrent_dahboard_ chart_c mt-2 mb-0 pb-0">
                        <div class="text text-dark">Assign Role</div>
                    </div>

                    <div>
                        <?php if($roles->isNotEmpty()): ?>
                            <?php $__currentLoopData = $roles; $__env->addLoop($__currentLoopData); foreach($__currentLoopData as $role): $__env->incrementLoopIndices(); $loop = $__env->getLastLoop(); ?>
                                <div class="col m-2 form-check d-inline-block">
                                    <input <?php echo e($hasRoles->contains($role->id) ? 'checked' : ''); ?> type="checkbox"
                                        id="role-<?php echo e($role->id); ?>" class="form-check-input" name="role[]"
                                        value="<?php echo e($role->name); ?>">
                                    <label class="form-check-label"
                                        for="role-<?php echo e($role->id); ?>"><?php echo e($role->name); ?></label>
                                </div>
                            <?php endforeach; $__env->popLoop(); $loop = $__env->getLastLoop(); ?>
                        <?php endif; ?>
                    </div>
                <?php endif; ?>
            </div>


            <div class="end-buttons">
                <button type="submit" class="quick-btn"><?php echo e(__('Update')); ?></button>
                <button type="button" class="quick-btn"
                    onclick="confirmResetPassword()"><?php echo e(__('Reset Password')); ?></button>

            </div>
            <?php echo Form::close(); ?>

            <form id="reset-password-form" action="<?php echo e(route('user-config.resetPassword', Crypt::encrypt($user->id))); ?>"
                method="POST" style="display: none;">
                <?php echo csrf_field(); ?>
                <?php echo method_field('PUT'); ?>
            </form>
        </div>
    </div>
<?php $__env->stopSection(); ?>

<?php $__env->startSection('scripts'); ?>
    <script src="<?php echo e(asset('js/chart-loader.js')); ?>"></script>
    <script src="<?php echo e(asset('js/custom.js')); ?>"></script>

    <script>
        function confirmResetPassword() {
            Swal.fire({
                title: "<?php echo __('Are you sure?'); ?>",
                text: "<?php echo __('You want to reset the password!'); ?>",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                cancelButtonText: '<?php echo __('Cancel'); ?>',
                confirmButtonText: '<?php echo __('Yes, reset password!'); ?>'
            }).then((result) => {
                if (result.isConfirmed) {
                    // Submit the form if confirmed
                    document.getElementById('reset-password-form').submit();
                }
            })
        }
    </script>
<?php $__env->stopSection(); ?>

<?php echo $__env->make('layouts.dashboard', \Illuminate\Support\Arr::except(get_defined_vars(), ['__data', '__path']))->render(); ?><?php /**PATH C:\laragon\www\nhidcl\resources\views/user-config/edit.blade.php ENDPATH**/ ?>