@extends('layouts.dashboard')
@section('dashboard_content')

    <div class="container-fluid md:p-0">
        <div class="top_heading_dash__">
            <div class="main_hed">User Config - Create User</div>
        </div>
    </div>
    <div class="inner_page_dash__">
        <div class="my-4 ">
            <div class="tab_custom_c mb-[20px]">
                <button class="tablink" onclick="openPage('user_details', this, '#373737')" id="defaultOpen">
                    <svg fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-4">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244" />
                    </svg>
                    Create User
                </button>
            </div>
            @include('components.alert')
            <div id="user_details" class="tabcontent">
                <form id="createUserFrm" method="POST" action="{{ route('user-config.store') }}" class="form_grid_cust">
                    @csrf
                    <div class="inpus_cust_cs form_grid_dashboard_cust_">
                        <x-form.input label="Full Name" name="name" placeholder="Enter full name" :value="old('name')"
                            required />

                        <x-form.input label="Personal Email" name="email" type="email"
                            placeholder="Enter personal email address" value="{{ old('email') }}" required />

                        <x-form.input label="Mobile No" name="mobile" type="text" placeholder="Enter mobile number"
                            minlength="10" maxlength="10" value="{{ old('mobile') }}" required />

                        <x-form.input label="Date of Birth" name="date_of_birth" type="date"
                            value="{{ old('date_of_birth') }}" required/>

                        <x-form.select label="Status" name="status" :options="['1' => 'Active', '2' => 'Inactive']" value="{{ old('status') }}"
                            selectClass="js-select2" required />

                        <x-form.select label="User Type" name="user_type" :options="['External' => 'External', 'Internal' => 'Internal']" value="{{ old('user_type') }}"
                            selectClass="js-select2" required />

                        <x-form.select wrapperId="field_ext_emp_company_id" label="External Employee Company/Organization Name" name="ref_ext_emp_company_id"
                            {{-- :options="$external_employee_companies->pluck('name', 'id') ?? []"  --}} value="{{ old('ref_ext_emp_company_id') }}" selectClass="js-select2" />

                        <x-form.select wrapperId="field_ext_emp_designation_id" label="External Employee Designation" name="ref_ext_emp_designation_id"
                            {{-- :options="$external_employee_designation->pluck('name', 'id') ?? []"  --}} value="{{ old('ref_ext_emp_designation_id') }}" selectClass="js-select2" />
                    </div>

                    <div class=" inner_page_dash__ mt-[20px]">
                        <h4 class="text-[18px] py-[10px] font-semibold">Assign Role</h4>
                        <div class="">
                            <div class="grid_rdit_page_user">
                                <div class="">
                                    <div class="border_check_box__">
                                        <p>Roles</p>
                                        <div
                                            class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-1">
                                            @if ($roles->isNotEmpty())
                                                @foreach ($roles as $role)
                                                    <div class="custom_check_inline-item">
                                                        <input type="radio" id="role-{{ $role->id }}"
                                                            class="custom_check_inline-checkbox" name="role[]"
                                                            value="{{ $role->name }}">
                                                        <label class="custom_check_inline-label"
                                                            for="role-{{ $role->id }}">{{ $role->name }}</label>

                                                    </div>
                                                @endforeach
                                            @endif
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="text-center">
                        <button class="hover-effect-btn fill_btn" type="submit">
                            Submit
                        </button>
                    </div>
                </form>

            </div>
        </div>
    </div>
@endsection

@push('scripts')
    <script src="{{ asset('public/js/select2.min.js') }}"></script>
    <script src="{{ asset('public/js/utils/validationManager.js') }}"></script>
    <script src="{{ asset('public/js/user-management/create.js') }}"></script>
@endpush
