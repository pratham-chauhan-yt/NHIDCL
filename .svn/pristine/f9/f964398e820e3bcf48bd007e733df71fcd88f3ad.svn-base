@extends('layouts.dashboard')
@section('dashboard_content')
    <div class="container-fluid md:p-0">
        <div class="top_heading_dash__">
            <div class="main_hed">Add External Employee</div>
        </div>
    </div>
    <div class="inner_page_dash__">
        <div class="my-4">
            @php
                $tabs = [
                    ['id' => 'Home', 'label' => 'External Employee', 'icon' => 'add-external-employee'],
                    [
                        'id' => 'External-Employee',
                        'label' => 'Archive External Employee',
                        'icon' => 'external-employee-contact-list',
                    ],
                ];
            @endphp

            <div class="tab_custom_c mb-[20px]">
                @foreach ($tabs as $index => $tab)
                    <button class="tablink {{ $index === 0 ? 'active' : '' }}"
                        onclick="openPage('{{ $tab['id'] }}', this, '#373737')"
                        id="{{ $index === 0 ? 'defaultOpen' : '' }}">
                        <x-tabicon name="{{ $tab['icon'] }}" viewBox="0 -960 960 960" fill="#1f1f1f" />
                        {{ $tab['label'] }}
                    </button>
                @endforeach
            </div>
            @include('components.alert')
            <div id="Home" class="tabcontent" style="display: block;">
                <form action="{{ route('directory-management.external.employees.store') }}" method="post"
                    class="form_grid_cust" id="saveExternalEmployeeForm">
                    @csrf
                    <div class="inpus_cust_cs form_grid_dashboard_cust_">
                        <x-form.input label="Full Name" name="name" placeholder="Enter full name" :value="old('name')"
                            required />

                        <x-form.input label="Personal Email" name="email" type="email"
                            placeholder="Enter personal email address" value="{{ old('email') }}" required />

                        <x-form.input label="Mobile No" name="mobile" type="text" placeholder="Enter mobile number"
                            minlength="10" maxlength="10" value="{{ old('mobile') }}" required />

                        <x-form.input label="Designation" name="designation" placeholder="Enter designation name"
                            :value="old('designation')" required />

                        <x-form.input label="Department/Division" name="department"
                            placeholder="Enter department/division name" :value="old('department')" required />

                        <x-form.select label="State" name="ref_state_master_id" :options="$state->pluck('name', 'id') ?? []"
                            value="{{ old('ref_state_master_id') }}" selectClass="js-select2" required />

                        <x-form.input label="Address" name="address" placeholder="Address" :value="old('address')" required />
                    </div>
                    <div class="button_flex_cust_form">
                        <button class="hover-effect-btn fill_btn" id="saveExternalEmployee" type="submit">Add</button>
                    </div>
                </form>
            </div>

            <div id="External-Employee" class="tabcontent" style="display:none;">
                <div class="table_over">
                    <table class="cust_table__ table_sparated" id="External-EmployeeTable">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Mobile</th>
                                <th>Designation</th>
                                <th>Department</th>
                                <th>State</th>
                                <th>Address</th>
                                @can(['external-user-edit', 'external-user-delete'])
                                    <th>Status</th>
                                    <th>Action</th>
                                @endcan
                            </tr>
                        </thead>
                    </table>
                </div>
            </div>
        </div>
    </div>
@endsection

@push('styles')
    <link rel="stylesheet" href="{{ asset('public/css/flowbite.min.css') }}">
@endpush
@push('scripts')
    <script src="{{ asset('public/js/select2.min.js') }}"></script>
    <script src="{{ asset('public/js/utils/dataTableManager.js') }}"></script>
    <script src="{{ asset('public/js/utils/validationManager.js') }}"></script>
    <script src="{{ asset('public/js/directory-management/add-external-employee.js') }}"></script>
@endpush
